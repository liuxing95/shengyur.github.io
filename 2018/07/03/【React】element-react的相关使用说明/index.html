<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>element-react的相关使用说明 | 往东</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">element-react的相关使用说明</h1><a id="logo" href="/.">往东</a><p class="description">宁在一思进，莫在一思停。</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">element-react的相关使用说明</h1><div class="post-meta">Jul 3, 2018<span> | </span><span class="category"><a href="/categories/Frame/">库/框架</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span></div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#element-react的相关使用说明"><span class="toc-number">1.</span> <span class="toc-text">element-react的相关使用说明</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#参考资料"><span class="toc-number">1.1.</span> <span class="toc-text">参考资料</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#组件的修改与扩充"><span class="toc-number">1.2.</span> <span class="toc-text">组件的修改与扩充</span></a></li></ol></li></ol></div></div><div class="post-content"><h3 id="element-react的相关使用说明"><a href="#element-react的相关使用说明" class="headerlink" title="element-react的相关使用说明"></a>element-react的相关使用说明</h3><h4 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h4><ul>
<li><a href="https://.github.io/element-react/#/zh-CN/" target="_blank" rel="noopener">饿了么官方文档</a><a id="more"></a>
</li>
</ul>
<hr>
<p><strong>1.TimePicker</strong></p>
<p>（1）TimePicker的默认时间要设置成标准时间格式，其value值也是标准时间格式的。可以使用new Date()来设置。</p>
<pre><code>//此组件是用来选择时分秒的，所以年月日可以随意填写
let defaultTimePicker = new Date(2018,1,1,0,0,0);
</code></pre><p>（2）可能需要将标准时间格式转换为接口需要的格式，比如’YYYY-MM-DD HH:mm:ss’。  </p>
<hr>
<h4 id="组件的修改与扩充"><a href="#组件的修改与扩充" class="headerlink" title="组件的修改与扩充"></a>组件的修改与扩充</h4><p>有的组件并不能满足实际的需要，所以会在其内容上增加一下修改以及扩充。</p>
<hr>
<p><strong>1. Upload增加支持“only-picture”(只展示图片)的listType。</strong></p>
<pre><code>思路：增加this.props.listType名为&quot;only-picture&quot;的类型。

修改点：

（1）在Upload/Upload.js中，Upload.propTypes.listType增加一个&quot;only-picture&quot;的参数。

（2）在Upload/UploadList.js中，在render方法中，

        &lt;li
            className={this.classNames({
            &apos;ishow-upload-list__item&apos;: true,
            [`is-${file.status}`]: true,
            &apos;ishow-upload-only-picture&apos;: listType !== &apos;only-picture&apos;?false:true
            })}
            key={file.uid}
        &gt;
            {[&apos;picture-card&apos;, &apos;picture&apos;,&apos;only-picture&apos;].includes(listType) &amp;&amp;
            isFinished(file.status) &amp;&amp;
            &lt;img
                className=&quot;ishow-upload-list__item-thumbnail&quot;
                src={file.url}
                alt=&quot;&quot;
            /&gt;}

            {listType !== &apos;only-picture&apos;?
            &lt;a
                className=&quot;ishow-upload-list__item-name&quot;
                onClick={() =&gt; onPreview(file)}
            &gt;
                &lt;i className=&quot;ishow-icon-document&quot; /&gt;{file.name}
            &lt;/a&gt;
            :&apos;&apos;
            }

            &lt;label
                className=&quot;ishow-upload-list__item-status-label&quot;
            &gt;
                &lt;i
                className={this.classNames({
                    &apos;ishow-icon-upload-success&apos;: true,
                    &apos;ishow-icon-circle-check&apos;: listType === &apos;text&apos;,
                    &apos;ishow-icon-check&apos;: [&apos;picture-card&apos;, &apos;picture&apos;,&apos;only-picture&apos;].includes(
                        listType
                    )
                })}
                /&gt;

            &lt;/label&gt;
            &lt;i className=&quot;ishow-icon-close&quot; onClick={() =&gt; onRemove(file)} /&gt;
            &lt;View
                className=&quot;ishow-upload-list__item-actions&quot;
                show={listType === &apos;picture-card&apos; &amp;&amp; isFinished(file.status)}
            &gt;
                &lt;span&gt;
                    &lt;span
                        onClick={() =&gt; onPreview(file)}
                        className=&quot;ishow-upload-list__item-preview&quot;
                    &gt;
                        &lt;i className=&quot;ishow-icon-view&quot; /&gt;
                    &lt;/span&gt;
                    &lt;span
                        className=&quot;ishow-upload-list__item-delete&quot;
                        onClick={() =&gt; onRemove(file)}
                    &gt;
                        &lt;i className=&quot;ishow-icon-delete2&quot; /&gt;
                    &lt;/span&gt;
                &lt;/span&gt;
            &lt;/View&gt;
            {file.status === &apos;uploading&apos; &amp;&amp;
            &lt;Progress
                strokeWidth={listType === &apos;picture-card&apos; ? 6 : 2}
                type={listType === &apos;picture-card&apos; ? &apos;circle&apos; : &apos;line&apos;}
                percentage={parseInt(file.percentage, 10)}
                status={
                isFinished(file.status) &amp;&amp; file.showProgress ? &apos;success&apos; : &apos;&apos;
                }
            /&gt;}
        &lt;/li&gt;

（3）在Common/css/Upload.css中增加：

    .ishow-upload-only-picture{
        width:125px;
        display:inline-block;
        margin-right:10px;
    }
    .ishow-upload-only-picture .ishow-upload-list__item-thumbnail{
        width:100px;
        height:100px;
    }
</code></pre><hr>
<p><strong>2. TimePicker的组件增加支持时分的选择（原本只支持时分秒的选择）。</strong></p>
<pre><code>思路：通过format的设置，改变isShowSeconds的值。

修改点：

（1）在DatePicker/TimePicker.js中，converSelectRange方法修改如下：

        const format = props.format==&quot;HH:mm&quot;?props.format: DEFAULT_FORMATS.timerange;

（2）在DatePicker/panel/TimePanel.js中，render方法修改如下：

        const seconds = isShowSeconds?currentDate.getSeconds():null;

（3）在DatePicker/basic/TimeSpinner.js，constructor方法修改如下：

        //如果isShowSeconds为false，seconds设置为null
        this.state.seconds = props.isShowSeconds?this.state.seconds:null;
</code></pre><hr>
<p><strong>3. Checkbox的文本说明，增加title。</strong></p>
<pre><code>思路：增加this.props.showTitle的属性，如果showTitle为true，则展示title。

修改点：

    （1）在Checkbox/CheckBox.js中，render方法中修改如下：

        let title = this.props.showTitle?(this.props.children || this.state.label):&apos;&apos;;

        &lt;span className=&quot;ishow-checkbox__label&quot; title={title}&gt;
            {this.props.children || this.state.label}
        &lt;/span&gt;
</code></pre><hr>
<p><strong>4. Table的展开行可以自定义展开title与内容。</strong></p>
<pre><code>思路：在column中增加expandText和expandTitle两个值。

修改点：

    (1)在Table/TableBody.js中，renderCell方法中修改如下：

        const { type, selectable,expandText,expandTitle } = column;
        if (type === &apos;expand&apos;) {
            return (
                &lt;div
                    className={this.classNames(&apos;ishow-table__expand-icon &apos;, {
                        &apos;ishow-table__expand-icon--expanded&apos;: this.context.store.isRowExpanding(row, rowKey),
                })}
                    onClick={this.handleExpandClick.bind(this, row, rowKey)}
                &gt;

                {
                    expandText?
                        &lt;div&gt;&lt;span&gt;{expandTitle}&lt;/span&gt;&lt;i className=&quot;ishow-icon ishow-icon-arrow-right&quot; /&gt;&lt;/div&gt;
                    :&lt;span&gt;收缩&lt;/span&gt;
                }               
                &lt;/div&gt;
            )
        }
</code></pre><hr>
<p><strong>5. Table中正常使用Select</strong></p>
<pre><code>思路：在Select中增加selectUnderTable={true}，
     将.ishow-select-dropdown设置为position:fixed，再计算其正确的top值。

修改点：

（1）在Select/Select.js中，

    A.增加全局样式：

        .ishow-select-dropdown.ishow-select-undertable {
            position: fixed !important;
        }

    B.在onEnter() 方法的new Popper中增加一个option：

        selectUnderTable: this.props.selectUnderTable   

    C.在渲染.ishow-select-dropdown时，根据标识增加一个className：

        &lt;div ref=&quot;popper&quot; className={this.classNames(&apos;ishow-select-dropdown&apos;, {
            &apos;is-multiple&apos;: multiple
        },this.props.selectUnderTable?&apos;ishow-select-undertable&apos;:&apos;&apos;)} style={{
              minWidth: inputWidth,
            }}&gt;

（2）在Common/popper.js中，

    A.Popper.prototype.update方法中，增加一行传值：
</code></pre><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">data</span>.selectUnderTable = <span class="keyword">this</span>._options.selectUnderTable;</span><br></pre></td></tr></table></figure>
<pre><code>B.Popper.prototype.modifiers.applyStyle方法中，根据窗口滚动条高度计算top值：

    if(data.selectUnderTable){//表格内部的Select框    
        styles.top = top-this.getScrollTop();
    }else{
        styles.top = top;
    }

C.增加一个获取窗口滚动条高度的方法：

    Popper.prototype.getScrollTop = function() {
        var scrollTop = 0;
        if (document.documentElement &amp;&amp; document.documentElement.scrollTop) {
        scrollTop = document.documentElement.scrollTop;
        } else if (document.body) {
        scrollTop = document.body.scrollTop;
        }
        return scrollTop;
    }
</code></pre><hr>
<p><strong>6.Table中的一列复选框，不需要展示title</strong></p>
<pre><code>思路：根据column中type值，区分是否显示title

修改点：

（1）在Table/TableBody.js，renderCell方法中：

     renderCell(row, column, index, rowKey){
        const { type, selectable,expandText,notShowTitle } = column;//引入notShowTitle

        ...
    }

（2）在Table/TableBody.js，render方法中：
    &lt;div className=&quot;cell&quot;
        title={(column.type == &quot;selection&quot; &amp;&amp; column.notShowTitle)?&quot;&quot;: this.renderTitle(this.renderCell(row, column, rowIndex, rowKey))}
    &gt;
        {this.renderCell(row, column, rowIndex, rowKey)}
    &lt;/div&gt;
</code></pre><hr>
<p><strong>7.Pagination靠右展示</strong></p>
<pre><code>思路：当增加right={true}时，设置text-align:right样式

修改点：

（1）在Pagination/Pagination.js中，在render方法中：

    const className = this.classNames({
        &apos;ishow-pagination&apos;: true,
        &apos;ishow-pagination__rightwrapper&apos;: false,
        &apos;ishow-pagination--small&apos;: this.props.small,
        &apos;ishow-pagination--right&apos;: this.props.right
    })

（2）在Common/css/Pagination.css中，增加：

    .ishow-pagination--right{
        text-align: right;
    }
</code></pre><hr>
<p><strong>8.Table下方，如果使用了Pagination组件，当切换分页大小时，table表格会出现横向滚动条，为解决这一问题，增加一个选项：</strong></p>
<pre><code>思路：当增加overflowXHidden={true}时，设置overflow-x: hidden样式

修改点：

（1）在Table/Table.js中，在render方法中修改：

    className={props.overflowXHidden?&quot;ishow-table__body-wrapper ishow-table__overflow-x-hidden&quot;:&quot;ishow-table__body-wrapper&quot;}

（2）在Common/css/Table.css中，增加：

    .ishow-table__overflow-x-hidden{
        overflow-x: hidden;
    }
</code></pre><hr>
</div><div class="tags"><a href="/tags/React/">React</a></div><div class="post-nav"><a class="next" href="/2018/07/03/node_module无法删除？/">node_module无法删除？</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank"><input type="search" name="word" maxlength="20" placeholder="Search"/><input type="hidden" name="si" value="http://yoursite.com"/><input name="tn" type="hidden" value="bds"/><input name="cl" type="hidden" value="3"/><input name="ct" type="hidden" value="2097152"/><input name="s" type="hidden" value="on"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Nodejs/">Nodejs</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/人间不值得/">人间不值得</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Foundation/">前端基础</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JsTest/">前端自动化测试</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Questions/">十万个为什么</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Frame/">库/框架</a><span class="category-list-count">8</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Frame/函数式编程/">函数式编程</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术思想/">技术思想</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tools/">效率工具</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Analysis/">源码浅析</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/ES6/" style="font-size: 15px;">ES6</a> <a href="/tags/Sass/" style="font-size: 15px;">Sass</a> <a href="/tags/Jest/" style="font-size: 15px;">Jest</a> <a href="/tags/Nodejs/" style="font-size: 15px;">Nodejs</a> <a href="/tags/Ramda/" style="font-size: 15px;">Ramda</a> <a href="/tags/Javascript/" style="font-size: 15px;">Javascript</a> <a href="/tags/React/" style="font-size: 15px;">React</a> <a href="/tags/YAML/" style="font-size: 15px;">YAML</a> <a href="/tags/axios/" style="font-size: 15px;">axios</a> <a href="/tags/ES5/" style="font-size: 15px;">ES5</a> <a href="/tags/Hexo/" style="font-size: 15px;">Hexo</a> <a href="/tags/jQuery源码/" style="font-size: 15px;">jQuery源码</a> <a href="/tags/Less/" style="font-size: 15px;">Less</a> <a href="/tags/vscode/" style="font-size: 15px;">vscode</a> <a href="/tags/mock/" style="font-size: 15px;">mock</a> <a href="/tags/node/" style="font-size: 15px;">node</a> <a href="/tags/HTTP/" style="font-size: 15px;">HTTP</a> <a href="/tags/安全/" style="font-size: 15px;">安全</a> <a href="/tags/Node/" style="font-size: 15px;">Node</a> <a href="/tags/函数式编程/" style="font-size: 15px;">函数式编程</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/07/03/【React】element-react的相关使用说明/">element-react的相关使用说明</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/03/node_module无法删除？/">node_module无法删除？</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/01/马东脑残粉之 读《小学问》/">马东脑残粉之 读《小学问》</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/29/React基础之 排坑日常/">React基础之 使用排坑日常</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/28/React基础之 key的必要性与使用/">React基础之 React基础之 key的必要性与使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/27/为啥老王要敲头？/">为啥老王要敲头？</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/25/Array、Object常用方法/">Array、Object常用方法（ES3、ES5、ES6）</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/23/如何使用a标签或者href实现文件的下载？/">如何使用a标签或者href实现文件的下载？</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/20/YAML语言入门/">YAML语言入门</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/20/git踩坑小记录/">git菜鸟踩坑日常</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://www.haomwei.com/technology/maupassant-hexo.html" title="大道至简——Hexo简洁主题推荐" target="_blank">大道至简——Hexo简洁主题推荐</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">往东.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>